<div class="p-4 mt-6 md:mx-6 md:p-12">
  <h3>Cole√ß√µes
  </h3>
  <p>Lista de cole√ß√µes dispon√≠veis para visualiza√ß√£o e gerenciamento</p>

  <button 
    pButton 
    label="Adicionar Cole√ß√£o" 
    icon="pi pi-plus" 
    class="p-button-text" 
    [routerLink]="['/cadastroColecoes']">
  </button>
  <hr />
  <p-toast></p-toast>

<p-table
  #dt
  [value]="colecoesFiltradas"
  [paginator]="true"
  [rows]="pageSize"
  [totalRecords]="totalItems"
  [rowsPerPageOptions]="[5, 10, 20]"
  (onPageChange)="onPageChange($event)"
  [responsiveLayout]="'scroll'"
  dataKey="id"
>
  <!-- üîç Filtro Global -->
  <ng-template pTemplate="caption">
    <div class="table-header flex justify-between items-center">
      Lista de Cole√ß√µes
      <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input
          pInputText
          type="text"
          (input)="applyFilterGlobal($event)"
          placeholder="Buscar..."
        />
      </span>
    </div>
  </ng-template>

  <ng-template pTemplate="header">
    <tr>
      <th>Nome</th>
      <th>Descri√ß√£o</th>
   
      <th>A√ß√µes</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-c>
    <tr>
      <td>{{ c.nome }}</td>
      <td><div [innerHTML]="sanitizedDescriptions[c.id]"></div></td>
      <td>
        <div class="flex gap-2">
          <button pButton icon="pi pi-eye" class="p-button-text" (click)="visualizarColecao(c)"></button>
          <button pButton icon="pi pi-trash" class="p-button-text p-button-danger" (click)="excluirColecao(c)"></button>
        </div>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5">Nenhuma cole√ß√£o encontrada.</td>
    </tr>
  </ng-template>
</p-table>

<p-dialog
  header="Detalhes da Cole√ß√£o"
  [(visible)]="displayDialog"
  [modal]="true"
  [style]="{ width: '50vw' }"
>
  <h3>{{ selectedColecao?.nome }}</h3>
  <p><strong>Palavras-chave:</strong> {{ selectedColecao?.palavrasChave.join(', ') }}</p>
  <p><strong>Data de Cria√ß√£o:</strong> {{ selectedColecao?.dataCriacao | date:'dd/MM/yyyy' }}</p>
  <p><strong>Descri√ß√£o:</strong></p>
  <div [innerHTML]="selectedDescricao"></div>
</p-dialog>
